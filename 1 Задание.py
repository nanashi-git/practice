import numpy as np
from matplotlib import pyplot as plt

data =np.array(['1/2/09 6:17', '1/2/09 4:53', '1/2/09 13:08', '1/3/09 14:44',
       '1/4/09 12:56', '1/4/09 13:19', '1/4/09 20:11', '1/2/09 20:09',
       '1/4/09 13:17', '1/4/09 14:11', '1/5/09 2:42', '1/5/09 5:39',
       '1/2/09 9:16', '1/5/09 10:08', '1/2/09 14:18', '1/4/09 1:05',
       '1/5/09 11:37', '1/6/09 5:02', '1/6/09 7:45', '1/2/09 7:35',
       '1/6/09 12:56', '1/1/09 11:05', '1/5/09 4:10', '1/6/09 7:18',
       '1/2/09 1:11', '1/1/09 2:24', '1/7/09 8:08', '1/2/09 2:57',
       '1/1/09 20:21', '1/8/09 0:42', '1/8/09 3:56', '1/8/09 3:16',
       '1/8/09 1:59', '1/3/09 9:03', '1/5/09 13:17', '1/6/09 7:46',
       '1/5/09 20:00', '1/8/09 16:24', '1/9/09 6:39', '1/6/09 22:19',
       '1/6/09 23:00', '1/7/09 7:44', '1/3/09 13:24', '1/7/09 15:12',
       '1/7/09 20:15', '1/3/09 10:11', '1/9/09 15:58', '1/3/09 13:11',
       '1/10/09 12:57', '1/10/09 14:43', '1/10/09 12:05', '1/6/09 1:20',
       '1/10/09 14:56', '1/7/09 10:01', '1/1/09 1:26', '1/11/09 2:04',
       '1/11/09 14:17', '1/10/09 21:38', '1/7/09 6:18', '1/4/09 8:39',
       '1/5/09 0:31', '1/2/09 6:07', '1/12/09 3:25', '1/4/09 13:56',
       '1/7/09 0:12', '1/12/09 5:18', '1/8/09 15:16', '1/11/09 11:33',
       '1/7/09 20:22', '1/2/09 22:00', '1/5/09 13:52', '1/8/09 20:32',
       '1/8/09 13:34', '1/11/09 13:08', '1/12/09 19:04', '1/12/09 13:41',
       '1/11/09 10:38', '1/13/09 5:57', '1/13/09 6:13', '1/8/09 13:14',
       '1/2/09 11:41', '1/7/09 19:50', '1/1/09 20:28', '1/3/09 15:22',
       '1/12/09 3:03', '1/5/09 8:58', '1/10/09 14:03', '1/13/09 11:26',
       '1/2/09 12:18', '1/14/09 4:54', '1/6/09 17:15', '1/3/09 13:56',
       '1/4/09 7:54', '1/12/09 7:28', '1/6/09 15:15', '1/13/09 23:56',
       '1/14/09 19:32', '1/6/09 21:13', '1/14/09 11:19', '1/13/09 19:39',
       '1/8/09 7:26', '1/15/09 2:40', '1/12/09 6:40', '1/15/09 3:43',
       '1/5/09 15:39', '1/10/09 5:21', '1/15/09 4:12', '1/12/09 11:48',
       '1/6/09 10:48', '1/14/09 9:10', '1/14/09 22:44', '1/6/09 7:23',
       '1/1/09 5:04', '1/15/09 11:56', '1/15/09 11:58', '1/12/09 9:43',
       '1/15/09 12:33', '1/14/09 11:35', '1/14/09 15:40', '1/3/09 11:08',
       '1/12/09 1:37', '1/16/09 7:21', '1/15/09 12:54', '1/7/09 7:19',
       '1/3/09 9:56', '1/16/09 17:41', '1/5/09 5:33', '1/2/09 0:50',
       '1/13/09 1:51', '1/15/09 10:24', '1/11/09 8:59', '1/15/09 15:56',
       '1/1/09 12:19', '1/6/09 14:03', '1/9/09 15:32', '1/17/09 12:59',
       '1/12/09 12:37', '1/4/09 7:43', '1/17/09 16:22', '1/1/09 3:51',
       '1/18/09 5:27', '1/18/09 5:15', '1/1/09 1:51', '1/18/09 6:30',
       '1/11/09 10:51', '1/4/09 17:02', '1/17/09 1:23', '1/18/09 2:16',
       '1/18/09 11:34', '1/18/09 4:38', '1/18/09 13:26', '1/18/09 11:53',
       '1/18/09 12:04', '1/13/09 19:54', '1/5/09 21:06', '1/14/09 6:32',
       '1/4/09 23:48', '1/18/09 16:32', '1/18/09 17:04', '1/18/09 17:20',
       '1/18/09 17:39', '1/11/09 11:20', '1/13/09 20:59', '1/12/09 16:50',
       '1/12/09 15:12', '1/6/09 12:27', '1/9/09 18:52', '1/18/09 23:17',
       '1/7/09 8:21', '1/3/09 9:54', '1/5/09 19:37', '1/4/09 12:49',
       '1/8/09 11:55', '1/14/09 18:21', '1/11/09 19:01', '1/14/09 5:20',
       '1/15/09 8:07', '1/15/09 8:10', '1/2/09 17:45', '1/19/09 16:10',
       '1/19/09 16:55', '1/10/09 17:41', '1/18/09 13:49', '1/15/09 5:47',
       '1/19/09 23:06', '1/19/09 11:12', '1/4/09 1:38', '1/20/09 3:11',
       '1/3/09 10:52', '1/20/09 5:24', '1/20/09 6:03', '1/10/09 11:37',
       '1/20/09 5:50', '1/19/09 16:32', '1/18/09 10:42', '1/7/09 6:11',
       '1/3/09 8:29', '1/1/09 2:09', '1/20/09 12:34', '1/20/09 3:51',
       '1/15/09 11:26', '1/5/09 16:55', '1/12/09 19:47', '1/4/09 19:20',
       '1/10/09 8:33', '1/9/09 14:51', '1/16/09 2:41', '1/16/09 18:36',
       '1/20/09 8:10', '1/6/09 12:45', '1/10/09 8:13', '1/7/09 14:15',
       '1/8/09 15:27', '1/21/09 11:36', '1/21/09 14:06', '1/2/09 2:28',
       '1/19/09 19:07', '1/18/09 6:27', '1/20/09 11:58', '1/20/09 16:32',
       '1/1/09 7:09', '1/21/09 14:55', '1/7/09 22:29', '1/11/09 22:22',
       '1/21/09 14:25', '1/18/09 16:50', '1/21/09 12:08', '1/22/09 6:41',
       '1/12/09 9:23', '1/22/09 8:23', '1/3/09 6:41', '1/1/09 12:20',
       '1/4/09 22:00', '1/21/09 2:15', '1/1/09 14:22', '1/16/09 1:07',
       '1/20/09 8:51', '1/4/09 9:02', '1/6/09 8:34', '1/8/09 4:16',
       '1/23/09 3:33', '1/6/09 4:18', '1/23/09 3:30', '1/10/09 4:04',
       '1/5/09 2:57', '1/21/09 14:15', '1/21/09 6:39', '1/19/09 8:14',
       '1/23/09 8:00', '1/22/09 23:35', '1/14/09 3:09', '1/16/09 1:51',
       '1/1/09 6:29', '1/21/09 7:59', '1/23/09 7:37', '1/18/09 14:39',
       '1/24/09 9:01', '1/15/09 1:41', '1/17/09 7:23', '1/23/09 11:37',
       '1/19/09 15:02', '1/11/09 7:10', '1/10/09 3:28', '1/7/09 19:03',
       '1/17/09 14:02', '1/25/09 0:09', '1/9/09 14:27', '1/9/09 14:32',
       '1/11/09 15:59', '1/6/09 14:38', '1/6/09 9:52', '1/1/09 9:21',
       '1/3/09 7:58', '1/11/09 11:36', '1/13/09 14:53', '1/1/09 10:06',
       '1/16/09 5:07', '1/6/09 16:37', '1/18/09 17:21', '1/13/09 15:18',
       '1/24/09 8:21', '1/24/09 8:25', '1/18/09 13:06', '1/22/09 18:44',
       '1/8/09 8:58', '1/4/09 9:54', '1/13/09 20:22', '1/9/09 10:22',
       '1/5/09 12:28', '1/26/09 3:43', '1/26/09 3:49', '1/11/09 13:16',
       '1/22/09 15:32', '1/9/09 14:25', '1/21/09 11:28', '1/1/09 14:19',
       '1/26/09 4:30', '1/7/09 4:45', '1/11/09 12:12', '1/26/09 10:24',
       '1/26/09 8:58', '1/7/09 17:51', '1/18/09 20:16', '1/13/09 9:51',
       '1/24/09 18:43', '1/5/09 0:46', '1/9/09 1:12', '1/26/09 6:25',
       '1/21/09 16:57', '1/5/09 5:33', '1/27/09 5:10', '1/7/09 8:00',
       '1/20/09 7:08', '1/27/09 2:26', '1/5/09 6:14', '1/13/09 8:11',
       '1/10/09 9:18', '1/8/09 18:52', '1/12/09 10:06', '1/1/09 19:25',
       '1/27/09 15:28', '1/2/09 18:43', '1/8/09 18:41', '1/4/09 18:34',
       '1/25/09 8:32', '1/23/09 22:19', '1/7/09 10:03', '1/18/09 3:46',
       '1/28/09 0:40', '1/2/09 15:18', '1/18/09 13:59', '1/16/09 9:54',
       '1/28/09 7:07', '1/28/09 7:31', '1/18/09 12:32', '1/13/09 14:05',
       '1/28/09 7:49', '1/28/09 3:07', '1/12/09 15:16', '1/6/09 11:17',
       '1/23/09 9:49', '1/24/09 4:01', '1/25/09 18:21', '1/15/09 10:51',
       '1/2/09 5:14', '1/9/09 10:35', '1/4/09 10:16', '1/2/09 12:16',
       '1/28/09 12:31', '1/14/09 12:07', '1/16/09 7:20', '1/6/09 9:55',
       '1/7/09 12:55', '1/19/09 12:14', '1/13/09 15:19', '1/18/09 8:56',
       '1/4/09 17:54', '1/5/09 13:46', '1/5/09 10:49', '1/12/09 18:24',
       '1/18/09 4:01', '1/16/09 10:58', '1/13/09 8:20', '1/12/09 1:42',
       '1/28/09 13:07', '1/29/09 5:43', '1/29/09 5:30', '1/13/09 18:08',
       '1/9/09 15:24', '1/23/09 15:33', '1/29/09 12:28', '1/13/09 11:31',
       '1/29/09 10:09', '1/29/09 15:08', '1/4/09 5:12', '1/22/09 22:16',
       '1/5/09 19:26', '1/11/09 12:22', '1/2/09 9:31', '1/5/09 11:21',
       '1/17/09 9:49', '1/28/09 1:38', '1/19/09 10:32', '1/26/09 12:05',
       '1/7/09 18:53', '1/26/09 11:38', '1/8/09 13:19', '1/11/09 14:56',
       '1/30/09 20:36', '1/1/09 8:09', '1/17/09 11:09', '1/31/09 7:22',
       '1/31/09 9:12', '1/31/09 8:56', '1/31/09 9:00', '1/11/09 14:07',
       '1/1/09 12:25', '1/31/09 11:14', '1/2/09 9:57', '1/4/09 13:20',
       '1/22/09 12:32', '1/18/09 6:09', '1/8/09 0:04', '1/24/09 7:14',
       '1/24/09 11:05', '1/6/09 15:12', '1/24/09 17:06', '1/3/09 9:58',
       '1/9/09 16:35', '1/12/09 14:50', '1/7/09 13:49', '1/9/09 19:41',
       '1/26/09 4:53', '1/23/09 21:41', '1/6/09 16:07', '1/10/09 7:55',
       '1/28/09 20:44', '1/9/09 3:38', '1/19/09 8:52', '1/15/09 7:26',
       '1/30/09 19:12', '1/5/09 12:41', '1/28/09 20:59', '1/10/09 21:36',
       '1/25/09 19:59', '1/7/09 8:03', '1/21/09 9:07', '1/23/09 14:43',
       '1/5/09 13:07', '1/6/09 3:39', '1/15/09 15:26', '1/23/09 4:47',
       '1/12/09 10:05', '1/30/09 5:13', '1/14/09 10:32', '1/12/09 8:13',
       '1/27/09 8:11', '1/30/09 17:33', '1/15/09 9:52', '1/13/09 11:54',
       '1/21/09 11:00', '1/16/09 11:49', '1/1/09 9:35', '1/13/09 5:58',
       '1/6/09 16:08', '1/5/09 10:25', '1/4/09 21:08', '1/12/09 20:43',
       '1/17/09 3:22', '1/18/09 11:17', '1/27/09 9:01', '1/8/09 8:11',
       '1/26/09 23:28', '1/10/09 21:35', '1/11/09 6:01', '1/19/09 14:53',
       '1/22/09 7:14', '1/15/09 8:12', '1/7/09 6:33', '1/12/09 8:05',
       '1/28/09 13:03', '1/25/09 8:54', '1/5/09 10:08', '1/5/09 19:29',
       '1/7/09 19:06', '1/23/09 11:33', '1/3/09 21:11', '1/11/09 17:28',
       '1/21/09 20:18', '1/24/09 10:23', '1/7/09 14:55', '1/29/09 10:38',
       '1/8/09 14:04', '1/31/09 21:50', '1/1/09 16:00', '1/30/09 13:13',
       '1/27/09 16:50', '1/30/09 7:42', '1/17/09 15:48', '1/12/09 11:40',
       '1/30/09 20:27', '1/27/09 18:35', '1/16/09 12:47', '1/2/09 2:50',
       '1/21/09 5:39', '1/28/09 1:28', '1/8/09 13:33', '1/22/09 12:09',
       '1/20/09 8:23', '1/2/09 7:47', '1/11/09 4:55', '1/23/09 7:47',
       '1/21/09 23:19', '1/11/09 4:29', '1/11/09 4:39', '1/10/09 8:13',
       '1/22/09 12:55', '1/17/09 15:00', '1/4/09 14:06', '1/30/09 17:09',
       '1/20/09 5:01', '1/26/09 14:37', '1/29/09 13:27', '1/12/09 10:33',
       '1/5/09 8:28', '1/25/09 16:11', '1/25/09 20:44', '1/26/09 11:36',
       '1/27/09 2:32', '1/18/09 13:36', '1/7/09 5:53', '1/25/09 1:53',
       '1/18/09 11:42', '1/13/09 1:46', '1/2/09 15:57', '1/25/09 8:50',
       '1/14/09 8:16', '1/27/09 11:21', '1/8/09 10:13', '1/5/09 7:47',
       '1/22/09 9:00', '1/25/09 12:59', '1/10/09 19:28', '1/8/09 19:29',
       '1/8/09 12:04', '1/4/09 16:59', '1/30/09 11:56', '1/6/09 5:10',
       '1/14/09 3:39', '1/14/09 3:47', '1/19/09 3:19', '1/7/09 1:42',
       '1/7/09 13:01', '1/27/09 2:35', '1/3/09 14:14', '1/22/09 12:37',
       '1/29/09 6:49', '1/6/09 9:45', '1/12/09 11:16', '1/13/09 13:49',
       '1/12/09 7:23', '1/30/09 4:48', '1/22/09 16:29', '1/27/09 6:26',
       '1/15/09 10:16', '1/19/09 18:54', '1/2/09 22:44', '1/1/09 18:32',
       '1/14/09 1:28', '1/20/09 8:08', '1/29/09 2:48', '1/24/09 18:02',
       '1/7/09 8:26', '1/24/09 3:36', '1/5/09 15:23', '1/25/09 16:17',
       '1/15/09 10:37', '1/20/09 15:28', '1/28/09 18:00', '1/29/09 5:06',
       '1/6/09 18:53', '1/21/09 6:55', '1/26/09 20:18', '1/25/09 17:58',
       '1/9/09 14:37', '1/25/09 2:46', '1/17/09 20:46', '1/24/09 7:18',
       '1/11/09 7:09', '1/8/09 4:15', '1/22/09 10:47', '1/26/09 20:47',
       '1/12/09 12:22', '1/26/09 1:44', '1/18/09 12:57', '1/24/09 21:26',
       '1/26/09 12:26', '1/5/09 7:37', '1/14/09 12:33', '1/14/09 0:15',
       '1/1/09 12:42', '1/6/09 6:07', '1/15/09 5:11', '1/17/09 4:03',
       '1/19/09 10:13', '1/18/09 9:42', '1/9/09 11:14', '1/10/09 13:42',
       '1/7/09 7:28', '1/18/09 6:46', '1/30/09 12:18', '1/6/09 5:42',
       '1/2/09 10:58', '1/8/09 3:29', '1/12/09 13:23', '1/19/09 9:34',
       '1/9/09 7:49', '1/15/09 5:27', '1/8/09 23:40', '1/27/09 11:02',
       '1/14/09 13:23', '1/7/09 20:01', '1/20/09 12:32', '1/6/09 14:35',
       '1/4/09 6:51', '1/24/09 18:30', '1/25/09 5:57', '1/5/09 10:02',
       '1/13/09 9:14', '1/22/09 7:35', '1/2/09 11:06', '1/11/09 9:50',
       '1/21/09 20:44', '1/5/09 9:09', '1/5/09 12:41', '1/28/09 12:54',
       '1/21/09 4:46', '1/7/09 13:28', '1/27/09 11:18', '1/7/09 12:39',
       '1/24/09 13:54', '1/30/09 6:48', '1/22/09 18:07', '1/29/09 15:03',
       '1/2/09 14:14', '1/19/09 11:05', '1/28/09 16:17', '1/8/09 12:46',
       '1/29/09 16:07', '1/29/09 13:41', '1/8/09 6:29', '1/4/09 12:53',
       '1/14/09 12:55', '1/14/09 6:35', '1/27/09 13:08', '1/31/09 23:09',
       '1/21/09 14:34', '1/16/09 8:28', '1/11/09 9:55', '1/8/09 2:46',
       '1/26/09 7:11', '1/31/09 5:39', '1/9/09 8:35', '1/24/09 3:25',
       '1/26/09 8:45', '1/23/09 10:45', '1/28/09 8:50', '1/15/09 19:10',
       '1/9/09 20:25', '1/15/09 21:53', '1/12/09 0:17', '1/25/09 10:32',
       '1/12/09 23:35', '1/11/09 6:09', '1/3/09 13:35', '1/18/09 11:03',
       '1/5/09 18:55', '1/2/09 18:54', '1/13/09 14:44', '1/4/09 4:05',
       '1/27/09 12:47', '1/22/09 6:51', '1/1/09 21:40', '1/27/09 18:06',
       '1/10/09 14:59', '1/26/09 15:42', '1/12/09 14:37', '1/16/09 7:58',
       '1/22/09 14:32', '1/19/09 6:50', '1/24/09 11:54', '1/13/09 13:36',
       '1/13/09 11:56', '1/19/09 7:49', '1/10/09 7:37', '1/20/09 5:53',
       '1/6/09 10:34', '1/23/09 5:14', '1/14/09 16:02', '1/14/09 18:05',
       '1/8/09 20:52', '1/7/09 13:57', '1/25/09 10:34', '1/28/09 4:35',
       '1/19/09 3:25', '1/18/09 0:41', '1/27/09 2:38', '1/16/09 6:04',
       '1/5/09 5:30', '1/9/09 14:55', '1/29/09 10:07', '1/27/09 3:55',
       '1/25/09 12:35', '1/3/09 16:56', '1/12/09 12:04', '1/27/09 3:19',
       '1/24/09 9:30', '1/25/09 18:33', '1/15/09 11:43', '1/23/09 16:30',
       '1/5/09 12:57', '1/29/09 16:52', '1/10/09 0:04', '1/3/09 14:17',
       '1/15/09 9:00', '1/24/09 20:58', '1/10/09 11:53', '1/4/09 17:34',
       '1/28/09 0:22', '1/17/09 1:49', '1/25/09 17:48', '1/22/09 5:39',
       '1/19/09 15:40', '1/21/09 23:52', '1/19/09 13:15', '1/16/09 7:35',
       '1/22/09 9:48', '1/18/09 12:05', '1/4/09 10:44', '1/20/09 14:55',
       '1/2/09 18:41', '1/2/09 7:03', '1/21/09 7:19', '1/11/09 17:52',
       '1/16/09 17:56', '1/9/09 20:00', '1/13/09 2:47', '1/19/09 4:23',
       '1/13/09 12:51', '1/29/09 7:40', '1/21/09 4:34', '1/7/09 13:28',
       '1/26/09 16:47', '1/29/09 1:01', '1/25/09 12:55', '1/24/09 13:35',
       '1/28/09 13:30', '1/20/09 19:08', '1/29/09 17:13', '1/2/09 5:33',
       '1/31/09 11:03', '1/13/09 9:16', '1/19/09 12:38', '1/18/09 12:14',
       '1/22/09 10:59', '1/14/09 7:30', '1/19/09 1:52', '1/8/09 23:00',
       '1/25/09 7:29', '1/17/09 15:19', '1/23/09 12:23', '1/24/09 8:45',
       '1/27/09 3:45', '1/29/09 23:48', '1/3/09 18:43', '1/24/09 17:18',
       '1/2/09 15:13', '1/8/09 10:44', '1/29/09 8:13', '1/24/09 10:26',
       '1/24/09 12:56', '1/7/09 13:38', '1/23/09 15:38', '1/26/09 14:43',
       '1/17/09 20:33', '1/5/09 9:15', '1/20/09 8:16', '1/29/09 12:46',
       '1/15/09 18:12', '1/23/09 13:55', '1/26/09 10:26', '1/12/09 11:48',
       '1/29/09 15:20', '1/28/09 7:26', '1/14/09 0:03', '1/13/09 1:55',
       '1/12/09 23:21', '1/22/09 2:16', '1/29/09 12:53', '1/28/09 11:36',
       '1/19/09 6:50', '1/30/09 5:20', '1/19/09 14:06', '1/8/09 9:43',
       '1/23/09 9:09', '1/20/09 8:58', '1/2/09 13:35', '1/9/09 15:03',
       '1/23/09 7:04', '1/17/09 10:14', '1/19/09 16:16', '1/20/09 13:54',
       '1/23/09 21:35', '1/21/09 23:41', '1/21/09 4:11', '1/10/09 3:43',
       '1/15/09 18:08', '1/20/09 14:48', '1/21/09 11:56', '1/30/09 6:18',
       '1/12/09 17:28', '1/29/09 8:27', '1/24/09 12:43', '1/7/09 10:49',
       '1/11/09 17:06', '1/30/09 6:17', '1/7/09 10:52', '1/27/09 6:20',
       '1/21/09 20:02', '1/4/09 16:23', '1/6/09 12:26', '1/11/09 4:34',
       '1/17/09 6:39', '1/4/09 3:41', '1/12/09 5:50', '1/3/09 13:43',
       '1/11/09 6:51', '1/17/09 6:23', '1/26/09 18:38', '1/31/09 13:26',
       '1/21/09 2:20', '1/18/09 13:25', '1/18/09 18:57', '1/31/09 1:59',
       '1/25/09 16:08', '1/16/09 19:13', '1/31/09 15:25', '1/9/09 8:57',
       '1/4/09 22:18', '1/10/09 15:18', '1/16/09 19:47', '1/25/09 8:16',
       '1/25/09 8:48', '1/17/09 9:12', '1/24/09 1:22', '1/27/09 15:09',
       '1/25/09 21:49', '1/24/09 8:51', '1/6/09 14:08', '1/17/09 14:06',
       '1/21/09 12:38', '1/30/09 23:49', '1/12/09 12:00', '1/29/09 21:40',
       '1/24/09 13:38', '1/25/09 13:50', '1/12/09 13:41', '1/5/09 11:44',
       '1/2/09 8:31', '1/31/09 7:13', '1/20/09 2:17', '1/25/09 20:15',
       '1/25/09 19:44', '1/30/09 9:00', '1/7/09 19:18', '1/4/09 10:18',
       '1/23/09 14:57', '1/12/09 10:08', '1/19/09 4:22', '1/21/09 21:37',
       '1/25/09 4:34', '1/30/09 1:09', '1/26/09 15:16', '1/15/09 15:56',
       '1/2/09 20:47', '1/25/09 9:36', '1/20/09 20:09', '1/8/09 11:14',
       '1/6/09 20:39', '1/6/09 18:10', '1/11/09 6:46', '1/19/09 14:26',
       '1/31/09 6:14', '1/6/09 9:31', '1/21/09 7:31', '1/20/09 17:23',
       '1/29/09 12:10', '1/24/09 23:21', '1/28/09 10:37', '1/30/09 14:36',
       '1/21/09 2:07', '1/26/09 6:37', '1/4/09 14:27', '1/9/09 3:03',
       '1/8/09 19:26', '1/10/09 16:02', '1/6/09 6:31', '1/23/09 13:13',
       '1/18/09 17:55', '1/5/09 15:15', '1/2/09 10:32', '1/25/09 9:27',
       '1/5/09 6:12', '1/6/09 2:41', '1/27/09 14:42', '1/8/09 12:03',
       '1/29/09 12:16', '1/19/09 10:47', '1/8/09 2:49', '1/19/09 17:40',
       '1/11/09 0:15', '1/16/09 5:12', '1/19/09 6:52', '1/26/09 1:14',
       '1/30/09 10:31', '1/23/09 5:52', '1/7/09 9:54', '1/1/09 16:44',
       '1/23/09 9:27', '1/22/09 12:56', '1/16/09 13:35', '1/13/09 9:26',
       '1/25/09 11:35', '1/26/09 14:02', '1/7/09 13:26', '1/15/09 11:45',
       '1/27/09 12:02', '1/28/09 14:09', '1/23/09 7:13', '1/22/09 15:59',
       '1/16/09 10:27', '1/26/09 22:45', '1/25/09 18:33', '1/16/09 6:13',
       '1/12/09 17:19', '1/2/09 4:21', '1/5/09 3:03', '1/15/09 15:22',
       '1/26/09 5:38', '1/24/09 10:38', '1/2/09 7:30', '1/26/09 6:38',
       '1/17/09 7:56', '1/17/09 7:58', '1/18/09 4:32', '1/26/09 8:00',
       '1/11/09 8:41', '1/21/09 10:32', '1/29/09 12:27', '1/13/09 13:19',
       '1/31/09 18:12', '1/22/09 15:35', '1/5/09 11:24', '1/23/09 11:23',
       '1/7/09 20:55', '1/13/09 9:40', '1/25/09 15:18', '1/30/09 20:58',
       '1/31/09 4:50', '1/20/09 10:05', '1/9/09 5:15', '1/13/09 7:09',
       '1/3/09 11:03', '1/17/09 20:51', '1/5/09 7:55', '1/25/09 14:40',
       '1/25/09 17:55', '1/3/09 12:54', '1/22/09 3:57', '1/23/09 5:11',
       '1/25/09 11:52', '1/10/09 4:12', '1/10/09 9:32', '1/22/09 12:45',
       '1/6/09 18:11', '1/19/09 5:56', '1/25/09 10:50', '1/14/09 8:38',
       '1/2/09 17:24', '1/7/09 18:15', '1/3/09 21:19', '1/4/09 5:13',
       '1/4/09 9:28', '1/2/09 4:34', '1/22/09 11:10', '1/7/09 12:06',
       '1/29/09 13:25', '1/27/09 2:57', '1/7/09 13:19', '1/23/09 10:04',
       '1/19/09 4:55', '1/28/09 22:02', '1/4/09 18:57', '1/12/09 20:31',
       '1/24/09 12:00', '1/28/09 11:19', '1/7/09 17:48', '1/23/09 12:42',
       '1/7/09 19:48', '1/26/09 11:19', '1/5/09 13:23', '1/26/09 13:41',
       '1/20/09 10:42', '1/22/09 14:25', '1/28/09 5:36', '1/1/09 4:24',
       '1/8/09 11:55', '1/12/09 21:30'])
       
n_count_data=24
count_data=np.zeros(n_count_data)

for d in data:
        t=d.split(" ")[1].split(":")
        count_data[int(t[0])]+=1

count_data

fig, ax = plt.subplots(figsize=(12, 8))
ax.bar(np.arange(n_count_data), count_data, color="#348ABD")
ax.set_xlabel("Время (часы)")
ax.set_ylabel("Число продаж")
ax.set_title("Зависит ли число продаж от времени?")
ax.set_xlim(0, n_count_data)


n_count_data=24
count_data=np.zeros(n_count_data)

for d in data:
        t=d.split(" ")[1].split(":")
        count_data[int(t[0])]+=1

fig, ax = plt.subplots(figsize=(12, 8))
ax.bar(np.arange(n_count_data), count_data, color="#348ABD")
ax.set_xlabel("Время (часы)")
ax.set_ylabel("Число продаж")
ax.set_title("Зависит ли число продаж от времени?")
ax.set_xlim(0, n_count_data)


n_count_data=24
count_data=np.zeros(n_count_data)

for d in data:
        t=d.split(" ")[1].split(":")
        count_data[int(t[0])-0]+=1


plt.bar(np.arange(n_count_data), count_data, color="#348ABD")
plt.xlabel("Время (часы)")
plt.ylabel("Число продаж")
plt.title("Зависит ли число продаж от времени?")
plt.xlim(0, n_count_data);


import pymc as pm

alpha = 1.0 / count_data.mean()  
lambda_1 = pm.Exponential("lambda_1", alpha)
lambda_2 = pm.Exponential("lambda_2", alpha)

tau_1 = pm.DiscreteUniform("tau_1", lower=0, upper=12)
tau_2 = pm.DiscreteUniform("tau_2", lower=13, upper=n_count_data)


@pm.deterministic
def lambda_(tau_1=tau_1, lambda_1=lambda_1, lambda_2=lambda_2, tau_2=tau_2):
    out = np.zeros(n_count_data)
    out[:tau_1] = lambda_1  # lambda до tau_1 равно lambda1
    out[tau_1:] = lambda_2  # lambda после (влкючая) tau_1, но до tau_2 равно lambda2
    out[tau_2:] = lambda_1  # lambda после (включая) tau_2 равно lambda1
    return out    


observation = pm.Poisson("obs", lambda_, value=count_data, observed=True)

model = pm.Model([observation, lambda_1, lambda_2, tau_1, tau_2])

mcmc = pm.MCMC(model)
mcmc.sample(40000, 10000, 1)

lambda_1_samples = mcmc.trace('lambda_1')[:]
lambda_2_samples = mcmc.trace('lambda_2')[:]
tau_samples = mcmc.trace('tau_1')[:]
tau_2_samples = mcmc.trace('tau_2')[:]

plt.figure(figsize=(10, 10))

# Гистограммы примеров:

ax = plt.subplot(411)
ax.set_autoscaley_on(False)

plt.hist(lambda_1_samples, histtype='stepfilled', bins=30, alpha=0.85,
         label="Апостериорное распределение $\lambda_1$", color="#A60628", density=True)
plt.legend(loc="upper left")
plt.title(r"""Апостериорные распределения параметров
    $\lambda_1,\;\lambda_2,\;\tau$""")
plt.xlim([20, 70])
plt.ylim([0, .3])
plt.xlabel("Значение $\lambda_1$")

ax = plt.subplot(412)
ax.set_autoscaley_on(False)
plt.hist(lambda_2_samples, histtype='stepfilled', bins=30, alpha=0.85,
         label="Апостериорное распределение $\lambda_2$", color="#7A68A6", density=True)
plt.legend(loc="upper right")
plt.xlim([20, 70])
plt.ylim([0, .3])
plt.xlabel("Значение $\lambda_2$")

plt.subplot(413)
w = 1.0 / tau_samples.shape[0] * np.ones_like(tau_samples)
plt.hist(tau_samples, bins=n_count_data, alpha=1,
         label=r"Апостериорное распределение $\tau$ 1",
         color="#467821", weights=w, rwidth=2.)
plt.xticks(np.arange(n_count_data))

plt.legend(loc="upper left")
plt.ylim([0, .75])
plt.xlim([0, len(count_data)])
plt.xlabel(r"$\tau$ (часы)")
plt.ylabel("Вероятность");

plt.subplot(414)
w_2 = 1.0 / tau_2_samples.shape[0] * np.ones_like(tau_2_samples)
plt.hist(tau_2_samples, bins=n_count_data, alpha=1,
         label=r"Апостериорное распределение $\tau$ 2",
         color="#467821", weights=w_2, rwidth=2.)
plt.xticks(np.arange(n_count_data))

plt.legend(loc="upper left")
plt.ylim([0, .75])
plt.xlim([0, len(count_data)])
plt.xlabel(r"$\tau$ (часы)")
plt.ylabel("Вероятность");

plt.subplots_adjust(wspace=0, hspace=0.5)


# tau_samples, lambda_1_samples, lambda_2_samples содержат
# N примеров из соответствующих апостериорных распределений
N = tau_samples.shape[0]
expected_sales = np.zeros(n_count_data)
for t in range(0, n_count_data):
    # ix - булевский индекс всех примеров tau_1, соответствующих
    # тому, что "переключение" произошло раньше значения t
    ix = t < tau_samples
    # ix_2 - булевский индекс всех примеров tau_2, соответствующих
    # тому, что "переключение" произошло позже значения t
    ix_2 = t > tau_2_samples
    # переопределяем ix (объединяем условия)
    ix = ix + ix_2
    # Каждый пример из апостериорного распределения соответствует значению tau.
    # Для каждого часа это значение tau показывает, находимся мы "до"
    # (в "режиме" lambda1) или "после" (в "режиме" lambda2) переключения.
    # Беря апостериорные примеры lambda1/2 соответствующим образом можно
    # вычислить среднее значение по всем примерам, чтобы получить соответствующее
    # значение lambda для конкретного часа t.
    # Так как переменная "число продаж" имеет распределение Пуассона, то
    # lambda (параметр распределения Пуассона) является ожидаемым значением
    # числа продаж.
    expected_sales[t] = (lambda_1_samples[ix].sum() + lambda_2_samples[~ix].sum()) / N


fig, ax = plt.subplots(figsize=(12, 8))
ax.plot(range(n_count_data), expected_sales, lw=4, color="#E24A33",
         label="Ожидаемое число продаж")
ax.bar(np.arange(len(count_data)), count_data, color="#348ABD", alpha=0.65,
        label="Наблюдаемое число продаж")
ax.set_xlim(0, n_count_data)
ax.set_xlabel("Час")
ax.set_ylabel("Ожидаемое число продаж")
ax.set_title("Ожидаемое число продаж")
ax.set_ylim(0, 80)

ax.legend(loc="upper right")

plt.show();